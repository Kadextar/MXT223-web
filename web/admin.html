<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель — МХТ-223</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/admin.css">
</head>

<body>
    <div class="background-globes">
        <div class="globe globe-1"></div>
        <div class="globe globe-2"></div>
    </div>

    <div class="app-container admin-app">
        <header class="admin-header">
            <a href="/" class="admin-back-link"><i class="fas fa-arrow-left"></i> На главную</a>
            <h1 class="admin-title"><i class="fas fa-cog"></i> Админ-панель</h1>
        </header>

        <nav class="admin-tabs" role="tablist">
            <button type="button" class="tab-btn active" data-tab="dashboard" role="tab">Дашборд</button>
            <button type="button" class="tab-btn" data-tab="schedule" role="tab">Расписание</button>
            <button type="button" class="tab-btn" data-tab="teachers" role="tab">Преподаватели</button>
            <button type="button" class="tab-btn" data-tab="announcements" role="tab">Объявления</button>
        </nav>

        <main class="admin-main">
            <!-- Dashboard -->
            <section id="dashboard" class="admin-section active" role="tabpanel">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-blue"><i class="fas fa-users"></i></div>
                        <div class="stat-info">
                            <span class="stat-number" id="stat-students">—</span>
                            <span class="stat-label">Всего студентов</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-amber"><i class="fas fa-chalkboard-teacher"></i></div>
                        <div class="stat-info">
                            <span class="stat-number" id="stat-teachers">—</span>
                            <span class="stat-label">Преподавателей</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-yellow"><i class="fas fa-star"></i></div>
                        <div class="stat-info">
                            <span class="stat-number" id="stat-ratings">—</span>
                            <span class="stat-label">Всего отзывов</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-green"><i class="fas fa-bell"></i></div>
                        <div class="stat-info">
                            <span class="stat-number" id="stat-subs">—</span>
                            <span class="stat-label">Push-подписок</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Schedule -->
            <section id="schedule" class="admin-section" role="tabpanel">
                <div class="admin-card">
                    <div class="admin-card-head">
                        <h2 class="admin-card-title">Пары</h2>
                        <button type="button" class="btn-add" id="add-lesson-btn"><i class="fas fa-plus"></i> Добавить пару</button>
                    </div>
                    <div class="table-wrap">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>День</th>
                                    <th>Пара</th>
                                    <th>Предмет</th>
                                    <th>Тип</th>
                                    <th>Ауд.</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="schedule-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Teachers -->
            <section id="teachers" class="admin-section" role="tabpanel">
                <div class="admin-card">
                    <div class="admin-card-head">
                        <h2 class="admin-card-title">Преподаватели</h2>
                        <button type="button" class="btn-add" id="add-teacher-btn"><i class="fas fa-plus"></i> Добавить преподавателя</button>
                    </div>
                    <div class="table-wrap">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Имя</th>
                                    <th>Предмет</th>
                                    <th>Рейтинг</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="teachers-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Announcements -->
            <section id="announcements" class="admin-section" role="tabpanel">
                <div class="admin-card">
                    <h2 class="admin-card-title"><i class="fas fa-bell"></i> Push-уведомления</h2>
                    <p class="admin-card-desc">Отправка уведомлений всем подписанным устройствам.</p>
                    <div class="form-group">
                        <label class="form-label">Заголовок</label>
                        <input type="text" id="push-title" class="form-input" placeholder="МХТ-223" value="МХТ-223">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Сообщение</label>
                        <textarea id="push-message" class="form-textarea" placeholder="Введите текст уведомления..." rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Ссылка (опционально)</label>
                        <input type="text" id="push-url" class="form-input" placeholder="/" value="/">
                    </div>
                    <button type="button" class="btn-add" onclick="sendPushNotification()"><i class="fas fa-paper-plane"></i> Отправить Push</button>
                    <div id="push-result" class="admin-message hidden"></div>
                </div>

                <div class="admin-card">
                    <h2 class="admin-card-title"><i class="fas fa-bullhorn"></i> Баннер объявления</h2>
                    <p class="admin-card-desc">Оставьте пустым, чтобы отключить баннер.</p>
                    <div class="form-group">
                        <input type="text" id="announcement-input" class="form-input" placeholder="Текст объявления (например: Завтра пары отменены!)">
                    </div>
                    <p class="form-hint">Привязать к расписанию (необязательно)</p>
                    <div class="form-row">
                        <div class="form-group form-group-inline">
                            <label class="form-label">Неделя</label>
                            <input type="number" id="announcement-week" class="form-input form-input-narrow" min="1" max="20" placeholder="1–20">
                        </div>
                        <div class="form-group form-group-inline">
                            <label class="form-label">День</label>
                            <select id="announcement-day" class="form-select form-select-medium">
                                <option value="">—</option>
                                <option value="monday">Понедельник</option>
                                <option value="tuesday">Вторник</option>
                                <option value="wednesday">Среда</option>
                                <option value="thursday">Четверг</option>
                                <option value="friday">Пятница</option>
                            </select>
                        </div>
                    </div>
                    <button type="button" class="btn-add" id="save-announcement-btn"><i class="fas fa-save"></i> Сохранить объявление</button>
                    <p id="announcement-stats" class="admin-stats-hint"></p>

                    <h3 class="admin-subtitle"><i class="fas fa-comments"></i> Отзывы к предметам</h3>
                    <div id="subject-reviews-list-admin" class="reviews-list-admin"></div>
                </div>
            </section>
        </main>
    </div>

    <!-- Lesson Modal -->
    <div id="lesson-modal" class="modal hidden" aria-modal="true" aria-labelledby="lesson-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-content-admin">
            <h2 id="lesson-modal-title" class="modal-title">Добавить пару</h2>
            <form id="lesson-form">
                <div class="form-group">
                    <label class="form-label">День недели</label>
                    <select name="day" class="form-select" required>
                        <option value="monday">Понедельник</option>
                        <option value="tuesday">Вторник</option>
                        <option value="wednesday">Среда</option>
                        <option value="thursday">Четверг</option>
                        <option value="friday">Пятница</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Номер пары</label>
                    <select name="pair" class="form-select" required>
                        <option value="1">1 пара (08:00)</option>
                        <option value="2">2 пара (09:30)</option>
                        <option value="3">3 пара (11:00)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Предмет</label>
                    <input type="text" name="subject" class="form-input" required list="subjects-list">
                    <datalist id="subjects-list"></datalist>
                </div>
                <div class="form-group">
                    <label class="form-label">Тип</label>
                    <select name="type" class="form-select" required>
                        <option value="lecture">Лекция</option>
                        <option value="seminar">Семинар</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Преподаватель</label>
                    <input type="text" name="teacher" class="form-input" list="teachers-list">
                    <datalist id="teachers-list"></datalist>
                </div>
                <div class="form-group">
                    <label class="form-label">Аудитория</label>
                    <input type="text" name="room" class="form-input" required>
                </div>
                <div class="modal-actions">
                    <button type="submit" id="lesson-submit-btn" class="btn-add">Добавить</button>
                    <button type="button" class="btn-secondary" id="close-lesson-modal">Отмена</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Teacher Modal -->
    <div id="teacher-modal" class="modal hidden" aria-modal="true" aria-labelledby="teacher-modal-title">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-content-admin">
            <h2 id="teacher-modal-title" class="modal-title">Добавить преподавателя</h2>
            <form id="teacher-form">
                <div class="form-group">
                    <label class="form-label">ФИО</label>
                    <input type="text" name="name" class="form-input" required placeholder="Иванов Иван Иванович">
                </div>
                <div class="form-group">
                    <label class="form-label">Предмет (основной)</label>
                    <input type="text" name="subject" class="form-input" placeholder="Например: Математика">
                </div>
                <div class="modal-actions">
                    <button type="submit" class="btn-add">Добавить</button>
                    <button type="button" class="btn-secondary" id="close-teacher-modal">Отмена</button>
                </div>
            </form>
        </div>
    </div>

    <script src="/static/theme_init.js"></script>
    <script type="module" src="/static/admin.js"></script>
</body>

</html>
