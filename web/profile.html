<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - –ú–•–¢-223</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="stylesheet" href="/static/academics.css">
    <link rel="stylesheet" href="/static/profile.css">
    <link rel="stylesheet" href="/static/toast.css">
    <meta name="description" content="–ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –ú–•–¢-223">
    <meta name="theme-color" content="#0f172a">
    <style>
        /* Profile Specific Tab Tweaks */
        .academics-tabs {
            top: 0;
            position: sticky;
            z-index: 90;
            margin-bottom: 20px;
        }

        .hidden {
            display: none !important;
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.1);
            transition: .4s;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
        }

        input:checked+.slider {
            background-color: var(--primary);
        }

        input:checked+.slider:before {
            transform: translateX(22px);
        }

        .slider.round {
            border-radius: 34px;
        }

        .slider.round:before {
            border-radius: 50%;
        }

        /* Light Mode Overrides for Slider */
        body.light-mode .slider {
            background-color: #cbd5e1;
            border: none;
        }

        body.light-mode input:checked+.slider {
            background-color: #3b82f6;
        }
    </style>
</head>

<body>
    <div class="background-globes">
        <div class="globe globe-1"></div>
        <div class="globe globe-2"></div>
        <div class="globe globe-3"></div>
    </div>

    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <h1>–ü—Ä–æ—Ñ–∏–ª—å</h1>
                <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º</p>
            </div>
        </header>

        <!-- New Profile Tabs -->
        <div class="academics-tabs">
            <div class="tabs-pill">
                <button class="tab-btn active" onclick="switchTab('profile')">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button class="tab-btn" onclick="switchTab('security')">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</button>
                <button class="tab-btn" onclick="switchTab('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
            </div>
        </div>

        <main class="profile-container">

            <!-- VIEW: PROFILE -->
            <div id="profile-view" class="tab-content">
                <!-- Student Info Card -->
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar-container">
                            <img src="/static/avatars/1.png" alt="Avatar" id="current-avatar" loading="lazy"
                                class="profile-avatar-img">
                            <button class="edit-avatar-btn" id="edit-avatar-btn">üñäÔ∏è</button>
                        </div>
                        <div class="profile-info">
                            <h2 id="student-name" class="skeleton-line" style="width:160px;height:28px;border-radius:8px" aria-busy="true"> </h2>
                            <p class="student-id" id="student-id">ID: ...</p>
                            <div class="profile-stats"
                                style="margin-top: 10px; font-size: 0.9em; color: var(--text-muted); display: flex; gap: 15px;">
                                <span>üóì –° –Ω–∞–º–∏ —Å: <b id="join-date">-</b></span>
                                <span>‚≠ê –û—Ç–∑—ã–≤–æ–≤: <b id="reviews-count">0</b></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div class="profile-card profile-section" id="schedule-stats-card">
                    <h3 class="profile-section-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <p class="profile-section-desc">–ü–æ–ª–µ–∑–Ω–∞—è —Å–≤–æ–¥–∫–∞</p>
                    <div id="schedule-stats" class="schedule-stats schedule-stats-grid">
                        <span>–°–µ–º–µ—Å—Ç—Ä: <b id="stats-semester-pct">‚Äî</b></span>
                        <span>–ü–∞—Ä –ø–æ –ø–ª–∞–Ω—É: <b id="stats-lessons-progress">‚Äî</b></span>
                        <span>–ü–∞—Ä –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ: <b id="stats-lessons-week">‚Äî</b></span>
                        <span>–ü–∞—Ä –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ: <b id="stats-lessons-month">‚Äî</b></span>
                        <span>–°–∞–º—ã–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π –¥–µ–Ω—å: <b id="stats-busiest-day">‚Äî</b></span>
                        <span>–ë–æ–ª—å—à–µ –Ω–∞ –Ω–µ–¥–µ–ª–µ: <b id="stats-most-type">‚Äî</b></span>
                        <span>–ß–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–µ–¥–º–µ—Ç: <b id="stats-top-subject">‚Äî</b></span>
                        <span>–°–µ—Ä–∏—è –∑–∞—Ö–æ–¥–æ–≤: <b id="stats-login-streak">‚Äî</b></span>
                    </div>
                    <div id="streak-calendar" class="streak-calendar" aria-label="–ö–∞–ª–µ–Ω–¥–∞—Ä—å –∑–∞—Ö–æ–¥–æ–≤"></div>
                </div>

                <!-- –î–µ–¥–ª–∞–π–Ω—ã -->
                <div class="profile-card profile-section">
                    <h3 class="profile-section-title">üìÖ –î–µ–¥–ª–∞–π–Ω—ã</h3>
                    <p class="profile-section-desc">–ö—É—Ä—Å–æ–≤—ã–µ, —Å–¥–∞—á–∏, —ç–∫–∑–∞–º–µ–Ω—ã. <a href="/academics.html" class="profile-inline-link">–≠–∫–∑–∞–º–µ–Ω—ã –∏ —Å–µ—Å—Å–∏—è ‚Üí</a></p>
                    <ul id="deadlines-list" class="deadlines-list"></ul>
                    <form id="deadline-form" class="deadline-form">
                        <input type="text" id="deadline-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: –°–¥–∞—á–∞ –∫—É—Ä—Å–æ–≤–æ–π)" required maxlength="120">
                        <input type="date" id="deadline-date" required>
                        <button type="submit" class="profile-pill-btn profile-pill-pdf">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </form>
                </div>

                <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å (–æ–¥–Ω–∞ —Å–µ–∫—Ü–∏—è) -->
                <div class="profile-card profile-section profile-schedule-calendar-card">
                    <h3 class="profile-section-title">üìÑ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—å</h3>
                    <p class="profile-section-desc">PDF, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å</p>
                    <div class="profile-schedule-calendar-actions">
                        <button type="button" class="profile-pill-btn profile-pill-pdf" id="profile-pdf-btn">
                            <i class="fas fa-file-pdf"></i> –°–∫–∞—á–∞—Ç—å PDF
                        </button>
                        <a href="/?fav=1" class="profile-pill-btn profile-pill-fav">
                            <i class="fas fa-star"></i> –ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ
                        </a>
                        <a id="google-calendar-btn" href="#" target="_blank" rel="noopener" class="profile-pill-btn profile-pill-google">
                            <i class="fab fa-google"></i> Google Calendar
                        </a>
                        <a id="apple-calendar-btn" href="/api/calendar.ics" download class="profile-pill-btn profile-pill-apple">
                            <i class="fas fa-apple-alt"></i> –°–∫–∞—á–∞—Ç—å –¥–ª—è Apple
                        </a>
                    </div>
                </div>

                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è (–≤ –∫–æ–Ω—Ü–µ) -->
                <div class="profile-card profile-section">
                    <h3 class="profile-section-title">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                    <div id="achievements-list" class="achievements-list"></div>
                </div>
            </div>

            <!-- VIEW: SECURITY -->
            <div id="security-view" class="tab-content hidden">
                <!-- Password Change Card -->
                <div class="profile-card">
                    <h3>üîê –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
                    <form id="password-form">
                        <div class="form-group">
                            <label>–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                            <div class="password-wrapper">
                                <input type="password" id="old-password" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å" required
                                    autocomplete="current-password">
                                <i class="fas fa-eye toggle-password"
                                    onclick="togglePassword('old-password', this)"></i>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <div class="password-wrapper">
                                <input type="password" id="new-password" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" required
                                    autocomplete="new-password">
                                <i class="fas fa-eye toggle-password"
                                    onclick="togglePassword('new-password', this)"></i>
                            </div>
                            <small>–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</small>
                        </div>

                        <div class="form-group">
                            <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                            <div class="password-wrapper">
                                <input type="password" id="confirm-password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å"
                                    required autocomplete="new-password">
                                <i class="fas fa-eye toggle-password"
                                    onclick="togglePassword('confirm-password', this)"></i>
                            </div>
                        </div>

                        <button type="submit" class="submit-btn">–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    </form>

                    <div id="message" class="message hidden"></div>
                </div>
            </div>

            <!-- VIEW: SETTINGS -->
            <div id="settings-view" class="tab-content hidden">

                <!-- Appearance Card -->
                <div class="profile-card">
                    <h3>üé® –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                    <div class="setting-row" style="margin-top: 16px;">
                        <label style="color: var(--text-main); font-weight: 600;">–¢–µ–º–∞</label>
                        <select id="theme-select" class="theme-select" style="margin-top: 8px; width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--card-border); background: var(--card-bg); color: var(--text-main);">
                            <option value="dark">–¢—ë–º–Ω–∞—è</option>
                            <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                            <option value="system">–ö–∞–∫ –≤ —Å–∏—Å—Ç–µ–º–µ</option>
                            <option value="time">–ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ (—Å–≤–µ—Ç–ª–∞—è –¥–Ω—ë–º, —Ç—ë–º–Ω–∞—è –Ω–æ—á—å—é)</option>
                        </select>
                    </div>
                    <div class="setting-row" style="margin-top: 12px;">
                        <label style="color: var(--text-main); font-weight: 600;">–ê–∫—Ü–µ–Ω—Ç</label>
                        <select id="accent-select" style="margin-top: 8px; width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--card-border); background: var(--card-bg); color: var(--text-main);">
                            <option value="blue">–°–∏–Ω–∏–π</option>
                            <option value="purple">–§–∏–æ–ª–µ—Ç–æ–≤—ã–π</option>
                            <option value="green">–ó–µ–ª—ë–Ω—ã–π</option>
                            <option value="orange">–û—Ä–∞–Ω–∂–µ–≤—ã–π</option>
                        </select>
                    </div>
                    <div class="setting-row" style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: var(--text-main);">AMOLED (—á—ë—Ä–Ω—ã–π —Ñ–æ–Ω)</strong>
                            <p class="text-muted" style="font-size: 0.85rem; margin: 2px 0 0;">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="amoled-toggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="setting-row" style="margin-top: 12px; display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <strong style="color: var(--text-main);">–ö—Ä—É–ø–Ω—ã–π —à—Ä–∏—Ñ—Ç</strong>
                            <p class="text-muted" style="font-size: 0.85rem; margin: 2px 0 0;">–î–ª—è —Å–ª–∞–±–æ–≥–æ –∑—Ä–µ–Ω–∏—è</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="large-font-toggle">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>

                <!-- Notifications Card -->
                <div class="profile-card" style="margin-top: 20px;">
                    <h3>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <p class="text-muted" style="margin-bottom: 16px;">–ü–æ–ª—É—á–∞–π—Ç–µ –≤–∞–∂–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–∞—Ä–∞—Ö.</p>
                    <div class="setting-row" style="margin-bottom: 12px;">
                        <label style="color: var(--text-main); font-weight: 600;">–ù–∞–ø–æ–º–Ω–∏—Ç—å –∑–∞</label>
                        <select id="reminder-minutes" class="theme-select" style="margin-top: 8px; width: 100%; padding: 10px 12px; border-radius: 12px; border: 1px solid var(--card-border); background: var(--card-bg); color: var(--text-main);">
                            <option value="0">–í—ã–∫–ª</option>
                            <option value="15">15 –º–∏–Ω—É—Ç</option>
                            <option value="30">30 –º–∏–Ω—É—Ç</option>
                            <option value="60">60 –º–∏–Ω—É—Ç</option>
                        </select>
                    </div>
                    <button class="submit-btn" id="enable-notifications-btn">–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                    <div id="push-message" class="message hidden" style="margin-top: 10px;"></div>
                </div>

                <!-- Actions Card -->
                <div class="profile-card" style="margin-top: 20px;">
                    <h3>‚öôÔ∏è –ê–∫–∫–∞—É–Ω—Ç</h3>
                    <button class="logout-btn" id="logout-btn">üö™ –í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
                </div>

                <!-- Version -->
                <div class="profile-card profile-version-card" style="margin-top: 20px;">
                    <p class="profile-version-text">–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: <strong id="app-version">‚Äî</strong></p>
                </div>
            </div>

            <!-- Avatar Selection Modal (Global) -->
            <div id="avatar-modal" class="modal hidden">
                <div class="modal-overlay"></div>
                <div class="modal-content">
                    <h2 style="color: var(--text-main); margin-bottom: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä</h2>
                    <div class="avatars-grid">
                        <!-- 9 avatars -->
                        <img src="/static/avatars/1.png" class="avatar-option" data-id="1.png" loading="lazy">
                        <img src="/static/avatars/2.png" class="avatar-option" data-id="2.png" loading="lazy">
                        <img src="/static/avatars/3.png" class="avatar-option" data-id="3.png" loading="lazy">
                        <img src="/static/avatars/4.png" class="avatar-option" data-id="4.png" loading="lazy">
                        <img src="/static/avatars/5.png" class="avatar-option" data-id="5.png" loading="lazy">
                        <img src="/static/avatars/6.png" class="avatar-option" data-id="6.png" loading="lazy">
                        <img src="/static/avatars/7.png" class="avatar-option" data-id="7.png" loading="lazy">
                        <img src="/static/avatars/8.png" class="avatar-option" data-id="8.png" loading="lazy">
                        <img src="/static/avatars/9.png" class="avatar-option" data-id="9.png" loading="lazy">
                    </div>
                    <button class="back-btn" id="close-avatar-modal"
                        style="width: 100%; margin-top: 20px;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>

        </main>

        <br><br><br> <!-- Spacer -->

        <nav class="profile-nav">
            <a href="/" class="nav-link" title="–ú–µ–Ω—é"><i class="fas fa-th-large"></i></a>
            <a href="/academics.html" class="nav-link" title="–ü—Ä–µ–¥–º–µ—Ç—ã"><i class="fas fa-book"></i></a>
            <a href="/ratings.html" class="nav-link" title="–†–µ–π—Ç–∏–Ω–≥"><i class="fas fa-star"></i></a>
            <a href="/profile.html" class="nav-link active" title="–ü—Ä–æ—Ñ–∏–ª—å"><i class="fas fa-user"></i></a>
        </nav>
    </div>

    <script type="module" src="/static/profile.js"></script>
</body>

</html>